    <div class="container mt-3">
      <h3 class="page-title text-center mb-4">Residences Management</h3>

      <!-- Pays selection + search + add button -->
      <div class="row mb-3 align-items-center">
<div class="col-md-4">
  <select class="form-select" [(ngModel)]="selectedPaysId" (change)="onPaysChange()">
    <option [ngValue]="undefined">-- Select Pays --</option> 
    <option *ngFor="let p of paysList" [value]="p.id_country">{{ p.pays }}</option>
  </select>
</div>



        <div class="col-md-4">
          <input type="text" class="form-control" placeholder="Search by name"
                [(ngModel)]="searchTerm" (input)="filterResidences()" />
        </div>

        <div class="col-md-4 text-end">
          <button class="btn btn-success" (click)="openCreateModal()">Add Residence</button>
        </div>
      </div>

      <!-- Residence cards -->
      <div class="row">
        <div *ngFor="let r of filteredResidences" class="col-md-4 mb-3">
          <div class="card h-100 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">{{ r.nom }}</h5>
              <p class="card-text">
                Nombre de blocs: {{ r.nombrebloc }} <br />
                Pays: {{ getPaysName(r.id_pays) }}
              </p>
            </div>
            <div class="card-footer d-flex justify-content-between">
              <button class="btn btn-primary btn-sm" (click)="openEditModal(r)">Edit</button>
              <button class="btn btn-danger btn-sm" (click)="deleteResidence(r.id_residence)">Delete</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Create/Update Modal -->
    <div class="modal fade" id="residenceModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog" style="margin-top: 250px;">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">{{ residenceToUpdate?.id_residence ? 'Edit Residence' : 'Create Residence' }}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form *ngIf="residenceToUpdate">
              <div class="mb-3">
                <label class="form-label">Name</label>
                <input type="text" class="form-control" [(ngModel)]="residenceToUpdate.nom" name="nom" required />
              </div>
              <div class="mb-3">
                <label class="form-label">Number of Blocs</label>
                <input type="number" class="form-control" [(ngModel)]="residenceToUpdate.nombrebloc" name="nombrebloc" required />
              </div>
              <div class="mb-3">
                <label class="form-label">Pays</label>
                <select class="form-select" [(ngModel)]="residenceToUpdate.id_pays" name="id_pays" required>
                  <option *ngFor="let p of paysList" [value]="p.id_country">{{ p.pays }}</option>
                </select>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="saveResidence()">
              {{ residenceToUpdate?.id_residence ? 'Update' : 'Create' }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Toasts -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
      <div *ngFor="let toast of toasts" class="toast show" [ngClass]="toast.type">
        {{ toast.message }}
      </div>
    </div>
